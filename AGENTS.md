# SSH Terminal - AI Agent æ–‡æ¡£

è¿™æ˜¯ä¸€ä¸ªé¢å‘ iFlow AI Agent çš„é¡¹ç›®æ–‡æ¡£ï¼Œæä¾›é¡¹ç›®æ¦‚è§ˆã€æŠ€æœ¯æ ˆã€æ¶æ„è®¾è®¡ã€å¼€å‘è§„èŒƒå’Œå¸¸ç”¨å‘½ä»¤ç­‰å…³é”®ä¿¡æ¯ã€‚

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®åç§°**: SSH Terminal
**ç‰ˆæœ¬**: 1.1.0
**ç±»å‹**: è·¨å¹³å°æ¡Œé¢åº”ç”¨ï¼ˆæ”¯æŒ Androidï¼‰
**æŠ€æœ¯æ ˆ**: Tauri 2.0 + React 19 + Rust
**åŒ…ç®¡ç†å™¨**: pnpm 10.14.0+

### æ ¸å¿ƒåŠŸèƒ½

- ğŸ–¥ï¸ **å¤šä¼šè¯ SSH ç»ˆç«¯ç®¡ç†** - æ”¯æŒ xterm.js ç»ˆç«¯æ¨¡æ‹Ÿ
- ğŸ¤– **AI æ™ºèƒ½åŠ©æ‰‹** - æ”¯æŒå¤šä¸ª AI Providerï¼ˆOpenAIã€Ollamaã€Qwenã€æ–‡å¿ƒä¸€è¨€ç­‰ï¼‰
- ğŸ“ **SFTP æ–‡ä»¶ç®¡ç†** - åŒé¢æ¿æ–‡ä»¶æµè§ˆå™¨
- â˜ï¸ **äº‘åŒæ­¥** - æ”¯æŒå¤šè®¾å¤‡åŒæ­¥ SSH ä¼šè¯ã€ç”¨æˆ·èµ„æ–™ç­‰æ•°æ®
- ğŸ‘¤ **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ** - æ”¯æŒè´¦å·æ³¨å†Œã€ç™»å½•ã€Token è®¤è¯
- ğŸ“¹ **è§†é¢‘å½•åˆ¶** - ç»ˆç«¯æ“ä½œå½•åˆ¶ï¼ˆè§†é¢‘ + éŸ³é¢‘ï¼‰
- ğŸ¬ **æˆªå›¾åŠŸèƒ½** - DOM to SVG çŸ¢é‡å›¾å¯¼å‡ºï¼ˆå¼€å‘å·¥å…·ï¼‰
- âŒ¨ï¸ **å¿«æ·é”®ç³»ç»Ÿ** - å®Œæ•´çš„å¿«æ·é”®ç»‘å®šå’Œè‡ªå®šä¹‰
- ğŸ¨ **ä¸»é¢˜ç³»ç»Ÿ** - 8 ç§ç»ˆç«¯ä¸»é¢˜æ”¯æŒ

---

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯æŠ€æœ¯æ ˆ

- **React 19** - UI æ¡†æ¶
- **TypeScript 5.8+** - ç±»å‹å®‰å…¨
- **Vite 7.0** - æ„å»ºå·¥å…·
- **Tailwind CSS 4.0** - æ ·å¼æ¡†æ¶
- **shadcn/ui** - UI ç»„ä»¶åº“ï¼ˆåŸºäº Radix UIï¼‰
- **Zustand 4.5** - çŠ¶æ€ç®¡ç†
- **React Router 7** - è·¯ç”±ç®¡ç†
- **xterm.js 5.5** - ç»ˆç«¯æ¨¡æ‹Ÿå™¨
- **React Hook Form + Zod** - è¡¨å•éªŒè¯

### åç«¯æŠ€æœ¯æ ˆï¼ˆTauriï¼‰

- **Rust 2021** - ç³»ç»Ÿç¼–ç¨‹è¯­è¨€
- **Tauri 2.4** - è·¨å¹³å°åº”ç”¨æ¡†æ¶
- **tokio 1.35** - å¼‚æ­¥è¿è¡Œæ—¶
- **russh 0.55** - çº¯ Rust SSH å®ç°ï¼ˆæ”¯æŒ Androidï¼‰
- **russh-sftp 2.1.1** - SFTP åè®®æ”¯æŒ
- **aes-gcm + argon2** - åŠ å¯†å­˜å‚¨
- **r2d2 + SQLite** - æ•°æ®åº“è¿æ¥æ± 

### åç«¯æœåŠ¡å™¨

- **Rust + Axum 0.7** - Web æ¡†æ¶
- **SeaORM 1.1** - ORM æ¡†æ¶
- **Redis 0.27** - Token ç¼“å­˜
- **JWT 9.x** - è®¤è¯æœºåˆ¶
- **æ”¯æŒæ•°æ®åº“**: SQLite / MySQL / PostgreSQL

---


---

## ğŸš€ å¸¸ç”¨å‘½ä»¤

### å¼€å‘å‘½ä»¤

```bash
# å®‰è£…ä¾èµ–
pnpm install

# å‰ç«¯å¼€å‘ï¼ˆä»…å‰ç«¯ï¼Œç«¯å£ 1420ï¼‰
pnpm dev

# Tauri å¼€å‘æ¨¡å¼ï¼ˆå‰ç«¯ + åç«¯ï¼‰
pnpm tauri dev

# ç”Ÿäº§æ„å»º
pnpm tauri build

# Windows æ„å»ºè„šæœ¬
pnpm tauri:build:win
```


### Tauri å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼
tauri dev

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
tauri build

# Android æ„å»º
tauri android build
```

---

## ğŸ›ï¸ æ¶æ„è®¾è®¡

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Frontend (React 19)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Pages: Terminal | SessionManager | Settings | AIChatPage      â”‚
â”‚  Components: layout | terminal | ssh | ai | sftp | sync        â”‚
â”‚  Store (Zustand): session | terminal | ai | auth | sync        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚ Tauri IPC Commands
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend (Rust + Tauri 2.0)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Commands Layer: session | terminal | storage                   â”‚
â”‚  SSH Manager Layer: SSHManager (ç®¡ç† Session å’Œ Connection)     â”‚
â”‚  SSH Backend Layer: russh (çº¯ Rust SSH) | portable-pty          â”‚
â”‚  Storage Layer: AES-256-GCM åŠ å¯† | SQLite æ•°æ®åº“                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â†‘
                         â”‚ External APIs
                         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               Backend Server (ssh-terminal-server)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  API: auth | user | ssh | sync                                  â”‚
â”‚  Services: AuthService | SyncService                            â”‚
â”‚  Storage: SQLite/MySQL/PostgreSQL | Redis                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ•°æ®æµ

#### SSH è¿æ¥æµ
```
ç”¨æˆ·æ“ä½œ â†’ React ç»„ä»¶ â†’ Zustand Store â†’ Tauri Command â†’ SSH Manager â†’ russh â†’ SSH Server
    â†“                                                                                   â†‘
ç•Œé¢æ›´æ–° â† Tauri Event (ssh-output-{id}) â† SSH Reader â† PTY â† SSH Process â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### AI äº¤äº’æµ
```
ç”¨æˆ·è¾“å…¥ â†’ AI ç»„ä»¶ â†’ aiStore â†’ API è°ƒç”¨ â†’ AI Provider (OpenAI/Claude/...)
    â†“                                                                              â†‘
ç•Œé¢æ›´æ–° â† AI å“åº” â† AI Provider â† HTTP è¯·æ±‚ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒæ¦‚å¿µ

1. **Sessionï¼ˆä¼šè¯é…ç½®ï¼‰** - ä¿å­˜çš„ SSH è¿æ¥é…ç½®
2. **Connectionï¼ˆè¿æ¥å®ä¾‹ï¼‰** - åŸºäº Session åˆ›å»ºçš„å®é™…è¿æ¥
3. **TerminalTabï¼ˆç»ˆç«¯æ ‡ç­¾é¡µï¼‰** - å‰ç«¯å±•ç¤ºçš„ç»ˆç«¯æ ‡ç­¾
4. **AI Conversationï¼ˆAI å¯¹è¯ï¼‰** - AI èŠå¤©ä¼šè¯
5. **AI Providerï¼ˆAI æœåŠ¡å•†ï¼‰** - æ”¯æŒå¤šä¸ª AI æœåŠ¡æä¾›å•†

---

## ğŸ’¾ æ•°æ®åº“æ¶æ„

### å®¢æˆ·ç«¯æœ¬åœ°æ•°æ®åº“ï¼ˆSQLiteï¼‰

ä½ç½®ï¼š`src-tauri/data/app.db`

| è¡¨å | è¯´æ˜ |
|------|------|
| `user_auth` | ç”¨æˆ·è®¤è¯ï¼ˆé‚®ç®±ã€å¯†ç å“ˆå¸Œï¼‰ |
| `ssh_sessions` | SSH ä¼šè¯é…ç½® |
| `user_profiles` | ç”¨æˆ·èµ„æ–™ |
| `app_settings` | åº”ç”¨è®¾ç½® |
| `sync_state` | åŒæ­¥çŠ¶æ€ |

### æœåŠ¡å™¨æ•°æ®åº“ï¼ˆSQLite/MySQL/PostgreSQLï¼‰

| è¡¨å | è¯´æ˜ |
|------|------|
| `users` | ç”¨æˆ·è¡¨ |
| `user_profiles` | ç”¨æˆ·èµ„æ–™è¡¨ |
| `ssh_sessions` | SSH ä¼šè¯è¡¨ |

---

## ğŸ” å®‰å…¨ç‰¹æ€§

- **AES-256-GCM åŠ å¯†** - å¯†ç å’Œå¯†é’¥åŠ å¯†å­˜å‚¨
- **Argon2 å¯†ç æ´¾ç”Ÿ** - ç”ŸæˆåŠ å¯†å¯†é’¥
- **ä¸»æœºå¯†é’¥éªŒè¯** - è‡ªåŠ¨æ£€æµ‹ SSH ä¸»æœºå¯†é’¥å˜åŒ–
- **JWT è®¤è¯** - Access Token + Refresh Token æœºåˆ¶
- **è½¯åˆ é™¤** - ä½¿ç”¨ `deleted_at` å­—æ®µæ ‡è®°åˆ é™¤

---

## ğŸ¨ ä¸»é¢˜ç³»ç»Ÿ

æ”¯æŒ 8 ç§ç»ˆç«¯ä¸»é¢˜ï¼š
- One Dark
- Dracula
- Nord
- Tokyo Night
- Monokai
- GitHub Light
- Solarized Light
- Solarized Dark

é…ç½®æ–‡ä»¶ï¼š`src/config/themes.ts`

---

## âŒ¨ï¸ å¿«æ·é”®ç³»ç»Ÿ

å®Œæ•´å¿«æ·é”®åˆ—è¡¨ï¼š`docs/Shortcuts.md`

é»˜è®¤å¿«æ·é”®ï¼š
- `Ctrl+N` / `Cmd+N` - æ–°å»ºè¿æ¥
- `Ctrl+W` / `Cmd+W` - å…³é—­æ ‡ç­¾
- `Ctrl+Shift+K` / `Cmd+Shift+K` - å¿«é€Ÿè¿æ¥
- `Ctrl+Shift+A` / `Cmd+Shift+A` - NL è½¬å‘½ä»¤

---

## ğŸ“ å¼€å‘è§„èŒƒ

### å‰ç«¯ï¼ˆReact + TypeScriptï¼‰

- **ç»„ä»¶å‘½å**ï¼šPascalCaseï¼ˆå¦‚ `MainLayout.tsx`ï¼‰
- **æ–‡ä»¶å‘½å**ï¼šPascalCaseï¼ˆç»„ä»¶ï¼‰ã€camelCaseï¼ˆå·¥å…·ï¼‰
- **ç±»å‹å®šä¹‰**ï¼š`interface` å®šä¹‰å¯¹è±¡ç±»å‹ï¼Œ`type` å®šä¹‰è”åˆç±»å‹
- **å¯¼å…¥é¡ºåº**ï¼šReact â†’ ç¬¬ä¸‰æ–¹åº“ â†’ æœ¬åœ°ç»„ä»¶ â†’ æœ¬åœ°å·¥å…·
- **ä¼˜å…ˆä½¿ç”¨ shadcn/ui ç»„ä»¶**ï¼š`src/components/ui/`
- **çŠ¶æ€ç®¡ç†**ï¼šZustandï¼Œéµå¾ªå•ä¸€æ•°æ®æºåŸåˆ™

### åç«¯ï¼ˆRustï¼‰

- **å‘½åé£æ ¼**ï¼šéµå¾ª Rust è§„èŒƒ
  - ç±»å‹/ç»“æ„ä½“/æšä¸¾ï¼šPascalCase
  - å‡½æ•°/å˜é‡/æ¨¡å—ï¼šsnake_case
  - å¸¸é‡ï¼šSCREAMING_SNAKE_CASE
- **é”™è¯¯å¤„ç†**ï¼š`Result<T, E>` å’Œè‡ªå®šä¹‰é”™è¯¯ç±»å‹
- **å¼‚æ­¥ç¼–ç¨‹**ï¼š`async/await` + `tokio`
- **Tauri å‘½ä»¤**ï¼š`#[tauri::command]` å®ï¼Œåœ¨ `lib.rs` ä¸­æ³¨å†Œ

### Git æäº¤è§„èŒƒ

```
<type>(<scope>): <subject>

ç±»å‹ï¼šfeat | fix | docs | style | refactor | test | chore
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ shadcn/ui ç»„ä»¶

```bash
npx shadcn@latest add [component-name]
```

### æ·»åŠ æ–°çš„ Tauri å‘½ä»¤

1. åœ¨ `src-tauri/src/commands/` åˆ›å»ºå‘½ä»¤æ–‡ä»¶
2. ä½¿ç”¨ `#[tauri::command]` å®æ ‡è®°å‡½æ•°
3. åœ¨ `src-tauri/src/lib.rs` ä¸­æ³¨å†Œå‘½ä»¤
4. å‰ç«¯ä½¿ç”¨ `invoke('command_name', { params })` è°ƒç”¨

### æ·»åŠ æ–°çš„é¡µé¢

1. åœ¨ `src/pages/` åˆ›å»ºé¡µé¢ç»„ä»¶
2. åœ¨ `src/App.tsx` æ·»åŠ è·¯ç”±
3. åœ¨ä¾§è¾¹æ æ·»åŠ å¯¼èˆªé“¾æ¥ï¼ˆå¦‚éœ€è¦ï¼‰

---

## ğŸ“š é‡è¦æ–‡æ¡£

- **[README.md](./README.md)** - é¡¹ç›®å®Œæ•´æ–‡æ¡£
- **[docs/Shortcuts.md](./docs/Shortcuts.md)** - å¿«æ·é”®åˆ—è¡¨
- **[docs/DOM_TO_SVG.md](./docs/DOM_TO_SVG.md)** - DOM to SVG ä½¿ç”¨æŒ‡å—
- **[docs/ai-cache-integration.md](./docs/ai-cache-integration.md)** - AI ç¼“å­˜é›†æˆæ–‡æ¡£
- **[docs/HOW_TO_ADD_KEYBINDING.md](./docs/HOW_TO_ADD_KEYBINDING.md)** - æ·»åŠ å¿«æ·é”®æŒ‡å—
- **[docs/SHADCN_TAILWIND_SETUP.md](./docs/SHADCN_TAILWIND_SETUP.md)** - shadcn/ui + Tailwind è®¾ç½®

---

## ğŸ”— ç›¸å…³èµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Tauri æ–‡æ¡£](https://tauri.app/)
- [React æ–‡æ¡£](https://react.dev/)
- [shadcn/ui æ–‡æ¡£](https://ui.shadcn.com/)
- [xterm.js æ–‡æ¡£](https://xtermjs.org/)
- [Tailwind CSS æ–‡æ¡£](https://tailwindcss.com/)
- [Zustand æ–‡æ¡£](https://zustand-demo.pmnd.rs/)

### AI æœåŠ¡
- [OpenAI API](https://platform.openai.com/)
- [Anthropic Claude API](https://www.anthropic.com/)
- [DeepSeek API](https://platform.deepseek.com/)

---

## ğŸ“¦ é‡è¦ä¾èµ–ç‰ˆæœ¬

### å‰ç«¯

| ä¾èµ– | ç‰ˆæœ¬ |
|------|------|
| React | 19.1.0 |
| TypeScript | 5.8.3 |
| Vite | 7.0.4 |
| Tailwind CSS | 4.1.12 |
| Zustand | 4.5.0 |
| React Router | 7.8.2 |
| xterm.js | 5.5.0 |
| @tauri-apps/api | 2.9.1 |

### åç«¯ï¼ˆRustï¼‰

| ä¾èµ– | ç‰ˆæœ¬ |
|------|------|
| Tauri | 2.4.0 |
| tokio | 1.35 |
| russh | 0.55 |
| russh-sftp | 2.1.1 |
| aes-gcm | 0.10 |
| argon2 | 0.5 |

---

## ğŸ“… æœ€åæ›´æ–°

2026å¹´2æœˆ23æ—¥

---

## ğŸ’¡ ç»™ AI Agent çš„æç¤º

1. **ä¼˜å…ˆä½¿ç”¨é¡¹ç›®å·¥å…·**ï¼šä¼˜å…ˆä½¿ç”¨ `read_file`ã€`glob`ã€`search_file_content` ç­‰å·¥å…·è¿›è¡Œæ–‡ä»¶æ“ä½œï¼Œé¿å…ä½¿ç”¨ shell å‘½ä»¤
2. **éµå¾ªé¡¹ç›®è§„èŒƒ**ï¼šä¸¥æ ¼éµå¾ªé¡¹ç›®çš„ä»£ç é£æ ¼å’Œå‘½åè§„èŒƒ
3. **ä½¿ç”¨ç°æœ‰ç»„ä»¶**ï¼šä¼˜å…ˆä½¿ç”¨ `src/components/ui/` ä¸­çš„ shadcn/ui ç»„ä»¶
4. **çŠ¶æ€ç®¡ç†**ï¼šä½¿ç”¨ Zustand è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†
5. **ç±»å‹å®‰å…¨**ï¼šå……åˆ†åˆ©ç”¨ TypeScript ç±»å‹ç³»ç»Ÿ
6. **æµ‹è¯•å‰ç«¯ä¿®æ”¹**ï¼šä»»ä½•å‰ç«¯æ–‡ä»¶ä¿®æ”¹ï¼ˆ.html/.css/.js/.jsx/.ts/.tsx/.vueï¼‰åï¼Œå¿…é¡»ä½¿ç”¨ frontend-tester è¿›è¡ŒéªŒè¯
7. **ä¸åˆ›å»ºå†—ä½™æ–‡æ¡£**ï¼šé™¤éç”¨æˆ·æ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ä¸è¦ä¸»åŠ¨åˆ›å»º .md æ–‡æ¡£æˆ– README æ–‡ä»¶